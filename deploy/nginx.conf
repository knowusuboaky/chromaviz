server {
  listen 80;

  # increase if you upload big JSON batches
  client_max_body_size 100m;

  # Dashboard at /dashboard → Flask on 5000 (prefix stripped)
  location /dashboard/ {
    rewrite ^/dashboard/?(.*)$ /$1 break;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $remote_addr;
    proxy_pass http://127.0.0.1:5000/;
  }

  # Everything else → Chroma HTTP API on 8000
  location / {
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $remote_addr;
    proxy_pass http://127.0.0.1:8000/;
  }
}
